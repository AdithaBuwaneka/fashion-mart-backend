<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fashion Mart - User Flow Diagrams</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        .header {
            background: linear-gradient(135deg, #2c3e50 0%, #3498db 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }
        .header h1 {
            margin: 0;
            font-size: 2.5em;
            font-weight: 300;
        }
        .header p {
            margin: 10px 0 0 0;
            opacity: 0.9;
            font-size: 1.1em;
        }
        .nav {
            background: #34495e;
            padding: 0;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
        }
        .nav a {
            color: white;
            text-decoration: none;
            padding: 15px 25px;
            display: block;
            transition: background 0.3s ease;
            border-right: 1px solid rgba(255,255,255,0.1);
        }
        .nav a:hover {
            background: rgba(255,255,255,0.1);
        }
        .content {
            padding: 40px;
        }
        .role-section {
            margin-bottom: 50px;
            border: 2px solid #ecf0f1;
            border-radius: 10px;
            overflow: hidden;
        }
        .role-header {
            background: #3498db;
            color: white;
            padding: 20px;
            margin: 0;
            font-size: 1.5em;
            font-weight: 500;
        }
        .role-content {
            padding: 30px;
        }
        .mermaid {
            text-align: center;
            margin: 20px 0;
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            border: 1px solid #dee2e6;
        }
        .features {
            background: #ecf0f1;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        .features h4 {
            color: #2c3e50;
            margin-top: 0;
        }
        .features ul {
            columns: 2;
            column-gap: 30px;
            margin: 0;
            padding-left: 20px;
        }
        .features li {
            margin-bottom: 8px;
            break-inside: avoid;
        }
        .api-endpoints {
            background: #fff;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }
        .api-endpoints h4 {
            color: #e74c3c;
            margin-top: 0;
        }
        .endpoint {
            font-family: 'Courier New', monospace;
            background: #f8f9fa;
            padding: 5px 10px;
            border-radius: 4px;
            margin: 5px 0;
            border-left: 3px solid #3498db;
        }
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }
        .stat-number {
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 5px;
        }
        .footer {
            background: #2c3e50;
            color: white;
            padding: 30px;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üåü Fashion Mart User Flow Diagrams</h1>
            <p>Complete workflow documentation for all user roles</p>
        </div>

        <div class="nav">
            <a href="#overview">Overview</a>
            <a href="#customer">Customer</a>
            <a href="#designer">Designer</a>
            <a href="#admin">Admin</a>
            <a href="#staff">Staff</a>
            <a href="#inventory">Inventory Manager</a>
        </div>

        <div class="content">
            <section id="overview">
                <h2>System Overview</h2>
                <div class="stats">
                    <div class="stat-card">
                        <div class="stat-number">5</div>
                        <div>User Roles</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">50+</div>
                        <div>API Endpoints</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">12</div>
                        <div>Core Features</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">3</div>
                        <div>Payment Methods</div>
                    </div>
                </div>

                <div class="mermaid">
                    graph TD
                        A[Fashion Mart System] --> B[Customer Portal]
                        A --> C[Designer Studio]
                        A --> D[Admin Dashboard]
                        A --> E[Staff Interface]
                        A --> F[Inventory Management]

                        B --> B1[Browse Products]
                        B --> B2[Place Orders]
                        B --> B3[Track Orders]
                        B --> B4[Manage Returns]

                        C --> C1[Create Designs]
                        C --> C2[Submit for Approval]
                        C --> C3[View Sales Analytics]
                        C --> C4[Manage Portfolio]

                        D --> D1[User Management]
                        D --> D2[System Analytics]
                        D --> D3[Generate Reports]
                        D --> D4[Process Bills with AI]

                        E --> E1[Process Orders]
                        E --> E2[Customer Support]
                        E --> E3[Handle Returns]
                        E --> E4[Update Order Status]

                        F --> F1[Stock Management]
                        F --> F2[Design Approval]
                        F --> F3[Low Stock Alerts]
                        F --> F4[Restock Operations]
                </div>
            </section>

            <section id="customer" class="role-section">
                <h3 class="role-header">üõçÔ∏è Customer Workflow</h3>
                <div class="role-content">
                    <div class="mermaid">
                        flowchart TD
                            Start([Customer Access]) --> Auth{Authenticated?}
                            Auth -->|No| Login[Login/Register via Clerk]
                            Auth -->|Yes| Dashboard[Customer Dashboard]
                            Login --> Dashboard

                            Dashboard --> Browse[Browse Products]
                            Dashboard --> Profile[Manage Profile]
                            Dashboard --> Orders[View Orders]
                            Dashboard --> Returns[Manage Returns]

                            Browse --> Filter[Apply Filters<br/>Category, Price, Size]
                            Filter --> ProductList[Product Catalog]
                            ProductList --> ProductDetail[Product Details]
                            ProductDetail --> AddCart[Add to Cart]

                            AddCart --> Checkout[Checkout Process]
                            Checkout --> Address[Shipping Address]
                            Address --> Payment[Payment via Stripe]
                            Payment --> Confirm[Order Confirmation]
                            Confirm --> OrderCreated[Order Created]

                            Orders --> OrderDetail[Order Details]
                            OrderDetail --> Track[Track Status]
                            OrderDetail --> Return[Request Return]

                            Return --> ReturnForm[Return Request Form]
                            ReturnForm --> ReturnSubmit[Submit Return]
                            ReturnSubmit --> Refund[Refund Processing]

                            Profile --> UpdateInfo[Update Personal Info]
                            Profile --> ChangeRole[Request Role Change]

                            style Start fill:#e1f5fe
                            style Dashboard fill:#f3e5f5
                            style OrderCreated fill:#e8f5e8
                            style Refund fill:#fff3e0
                    </div>

                    <div class="features">
                        <h4>Customer Features</h4>
                        <ul>
                            <li>Product browsing with advanced filters</li>
                            <li>Multi-variant selection (size, color)</li>
                            <li>Stripe payment integration</li>
                            <li>Real-time order tracking</li>
                            <li>7-day return policy</li>
                            <li>Profile management</li>
                            <li>Order history</li>
                            <li>Email notifications</li>
                            <li>Featured products display</li>
                            <li>Product availability checking</li>
                            <li>Related products suggestions</li>
                            <li>Return request management</li>
                        </ul>
                    </div>

                    <div class="api-endpoints">
                        <h4>Key API Endpoints</h4>
                        <div class="endpoint">GET /api/products - Browse products with filters</div>
                        <div class="endpoint">GET /api/products/featured - Get featured products</div>
                        <div class="endpoint">GET /api/products/{id} - Get product details</div>
                        <div class="endpoint">POST /api/customer/orders - Create new order</div>
                        <div class="endpoint">GET /api/customer/orders - Get order history</div>
                        <div class="endpoint">POST /api/customer/orders/{id}/payment-intent - Create payment</div>
                        <div class="endpoint">POST /api/customer/returns - Request return</div>
                        <div class="endpoint">GET /api/customer/profile - Get profile</div>
                        <div class="endpoint">PUT /api/customer/profile - Update profile</div>
                    </div>
                </div>
            </section>

            <section id="designer" class="role-section">
                <h3 class="role-header">üé® Designer Workflow</h3>
                <div class="role-content">
                    <div class="mermaid">
                        flowchart TD
                            Start([Designer Access]) --> Auth{Authenticated?}
                            Auth -->|No| Login[Login via Clerk]
                            Auth -->|Yes| Studio[Designer Studio]
                            Login --> Studio

                            Studio --> CreateDesign[Create New Design]
                            Studio --> ViewDesigns[View My Designs]
                            Studio --> Categories[Manage Categories]
                            Studio --> Analytics[View Sales Analytics]

                            CreateDesign --> DesignForm[Design Creation Form]
                            DesignForm --> UploadImages[Upload Design Images]
                            UploadImages --> SetDetails[Set Price & Category]
                            SetDetails --> SaveDraft[Save as Draft]

                            SaveDraft --> SubmitReview[Submit for Review]
                            SubmitReview --> Pending[Status: Pending]

                            Pending --> Review{Admin Review}
                            Review -->|Approved| Approved[Status: Approved]
                            Review -->|Rejected| Rejected[Status: Rejected]

                            Approved --> CreateProduct[Auto-Create Product]
                            CreateProduct --> StockSetup[Setup Stock Variants]
                            StockSetup --> Published[Product Published]

                            Rejected --> Feedback[Review Feedback]
                            Feedback --> EditDesign[Edit & Resubmit]
                            EditDesign --> SubmitReview

                            ViewDesigns --> DesignStatus[Check Status]
                            ViewDesigns --> EditExisting[Edit Existing]
                            ViewDesigns --> DeleteDesign[Delete Design]

                            Categories --> ViewCats[View Available Categories]

                            Analytics --> SalesData[View Sales Performance]
                            Analytics --> RevenueStats[Revenue Statistics]

                            style Start fill:#e1f5fe
                            style Studio fill:#f3e5f5
                            style Approved fill:#e8f5e8
                            style Rejected fill:#ffebee
                            style Published fill:#e0f2f1
                    </div>

                    <div class="features">
                        <h4>Designer Features</h4>
                        <ul>
                            <li>Design creation and management</li>
                            <li>Image upload with validation</li>
                            <li>Price and category setting</li>
                            <li>Design approval workflow</li>
                            <li>Draft saving functionality</li>
                            <li>Design portfolio management</li>
                            <li>Sales analytics dashboard</li>
                            <li>Revenue tracking</li>
                            <li>Category browsing</li>
                            <li>Design status monitoring</li>
                            <li>Submission tracking</li>
                            <li>Feedback management</li>
                        </ul>
                    </div>

                    <div class="api-endpoints">
                        <h4>Key API Endpoints</h4>
                        <div class="endpoint">GET /api/designer/designs - Get all designs</div>
                        <div class="endpoint">GET /api/designer/designs/{id} - Get design details</div>
                        <div class="endpoint">POST /api/designer/designs - Create new design</div>
                        <div class="endpoint">PUT /api/designer/designs/{id} - Update design</div>
                        <div class="endpoint">POST /api/designer/designs/{id}/submit - Submit for review</div>
                        <div class="endpoint">DELETE /api/designer/designs/{id} - Delete design</div>
                        <div class="endpoint">GET /api/designer/categories - Get categories</div>
                        <div class="endpoint">GET /api/designer/analytics - Get sales analytics</div>
                    </div>
                </div>
            </section>

            <section id="admin" class="role-section">
                <h3 class="role-header">üëë Admin Workflow</h3>
                <div class="role-content">
                    <div class="mermaid">
                        flowchart TD
                            Start([Admin Access]) --> Auth{Authenticated?}
                            Auth -->|No| Login[Admin Login via Clerk]
                            Auth -->|Yes| Dashboard[Admin Dashboard]
                            Login --> Dashboard

                            Dashboard --> Users[User Management]
                            Dashboard --> Reports[Generate Reports]
                            Dashboard --> Analytics[System Analytics]
                            Dashboard --> Bills[Process Bills with AI]
                            Dashboard --> Orders[Order Overview]

                            Users --> ViewUsers[View All Users]
                            Users --> UpdateRole[Update User Roles]
                            Users --> UserStats[User Statistics]

                            ViewUsers --> UserDetail[User Details]
                            UserDetail --> ChangeRole[Change Role]
                            ChangeRole --> RoleUpdated[Role Updated]

                            Reports --> MonthlyReport[Monthly Reports]
                            Reports --> CustomReport[Custom Date Range]
                            Reports --> ExportData[Export Reports]

                            MonthlyReport --> ReportGen[Generate Report]
                            CustomReport --> ReportGen
                            ReportGen --> PDFExport[Export as PDF]
                            ReportGen --> CSVExport[Export as CSV]

                            Analytics --> DashStats[Dashboard Statistics]
                            Analytics --> SalesAnalytics[Sales Analytics]
                            Analytics --> UserAnalytics[User Analytics]
                            Analytics --> RevenueTrends[Revenue Trends]

                            Bills --> UploadBill[Upload Bill Image]
                            Bills --> AIProcess[Google Vision AI Processing]
                            AIProcess --> ExtractData[Extract Bill Data]
                            ExtractData --> ReviewData[Review Extracted Data]
                            ReviewData --> SaveBill[Save Bill Information]

                            Orders --> OrdersList[View All Orders]
                            Orders --> OrderAnalytics[Order Analytics]
                            OrdersList --> UpdateStatus[Update Order Status]

                            style Start fill:#e1f5fe
                            style Dashboard fill:#f3e5f5
                            style RoleUpdated fill:#e8f5e8
                            style AIProcess fill:#fff3e0
                            style SaveBill fill:#e0f2f1
                    </div>

                    <div class="features">
                        <h4>Admin Features</h4>
                        <ul>
                            <li>Complete user management</li>
                            <li>Role assignment and modification</li>
                            <li>System-wide analytics dashboard</li>
                            <li>Revenue and sales tracking</li>
                            <li>Monthly and custom reports</li>
                            <li>PDF/CSV report exports</li>
                            <li>AI-powered bill processing</li>
                            <li>Google Vision API integration</li>
                            <li>Order management overview</li>
                            <li>User statistics monitoring</li>
                            <li>Performance metrics tracking</li>
                            <li>Data export capabilities</li>
                        </ul>
                    </div>

                    <div class="api-endpoints">
                        <h4>Key API Endpoints</h4>
                        <div class="endpoint">GET /api/admin/dashboard/stats - Get dashboard statistics</div>
                        <div class="endpoint">GET /api/admin/users - Get all users</div>
                        <div class="endpoint">PUT /api/admin/users/{id}/role - Update user role</div>
                        <div class="endpoint">GET /api/admin/reports/monthly - Get monthly reports</div>
                        <div class="endpoint">POST /api/admin/reports - Generate custom reports</div>
                        <div class="endpoint">POST /api/admin/bills/process - Process bills with AI</div>
                        <div class="endpoint">GET /api/orders - Get all orders</div>
                        <div class="endpoint">GET /api/orders/analytics - Get order analytics</div>
                    </div>
                </div>
            </section>

            <section id="staff" class="role-section">
                <h3 class="role-header">üë• Staff Workflow</h3>
                <div class="role-content">
                    <div class="mermaid">
                        flowchart TD
                            Start([Staff Access]) --> Auth{Authenticated?}
                            Auth -->|No| Login[Staff Login via Clerk]
                            Auth -->|Yes| Interface[Staff Interface]
                            Login --> Interface

                            Interface --> Orders[Order Processing]
                            Interface --> Returns[Return Management]
                            Interface --> Support[Customer Support]
                            Interface --> Reports[Generate Reports]

                            Orders --> PendingOrders[View Pending Orders]
                            Orders --> ProcessingOrders[View Processing Orders]
                            Orders --> ShippedOrders[View Shipped Orders]

                            PendingOrders --> OrderDetail[Order Details]
                            ProcessingOrders --> OrderDetail
                            ShippedOrders --> OrderDetail

                            OrderDetail --> UpdateStatus[Update Order Status]
                            UpdateStatus --> StatusOptions{Select Status}
                            StatusOptions --> Processing[Set to Processing]
                            StatusOptions --> Shipped[Set to Shipped]
                            StatusOptions --> Delivered[Set to Delivered]
                            StatusOptions --> Cancelled[Set to Cancelled]

                            Processing --> EmailNotify[Send Email Notification]
                            Shipped --> EmailNotify
                            Delivered --> EmailNotify
                            EmailNotify --> StatusUpdated[Status Updated]

                            Returns --> ViewReturns[View Return Requests]
                            Returns --> ProcessReturn[Process Returns]

                            ViewReturns --> ReturnDetail[Return Details]
                            ReturnDetail --> ApproveReturn[Approve Return]
                            ReturnDetail --> RejectReturn[Reject Return]

                            ApproveReturn --> InitiateRefund[Initiate Refund]
                            InitiateRefund --> RefundProcessed[Refund Processed]

                            Support --> CustomerIssues[Handle Customer Issues]
                            Support --> OrderInquiries[Order Inquiries]
                            Support --> ProductQuestions[Product Questions]

                            Reports --> OrderReports[Order Reports]
                            Reports --> ReturnReports[Return Reports]
                            Reports --> PerformanceReports[Performance Reports]

                            style Start fill:#e1f5fe
                            style Interface fill:#f3e5f5
                            style StatusUpdated fill:#e8f5e8
                            style RefundProcessed fill:#e0f2f1
                    </div>

                    <div class="features">
                        <h4>Staff Features</h4>
                        <ul>
                            <li>Order status management</li>
                            <li>Order processing workflow</li>
                            <li>Return request handling</li>
                            <li>Customer support tools</li>
                            <li>Email notification system</li>
                            <li>Refund processing</li>
                            <li>Order inquiries management</li>
                            <li>Performance tracking</li>
                            <li>Order analytics access</li>
                            <li>Return analytics</li>
                            <li>Status update notifications</li>
                            <li>Customer communication</li>
                        </ul>
                    </div>

                    <div class="api-endpoints">
                        <h4>Key API Endpoints</h4>
                        <div class="endpoint">GET /api/orders - Get all orders (staff access)</div>
                        <div class="endpoint">GET /api/orders/{id} - Get order details</div>
                        <div class="endpoint">PUT /api/orders/{id}/status - Update order status</div>
                        <div class="endpoint">GET /api/orders/analytics - Get order analytics</div>
                        <div class="endpoint">GET /api/customer/returns - View return requests</div>
                        <div class="endpoint">PUT /api/returns/{id}/status - Update return status</div>
                        <div class="endpoint">POST /api/payments/{id}/refund - Process refunds</div>
                    </div>
                </div>
            </section>

            <section id="inventory" class="role-section">
                <h3 class="role-header">üì¶ Inventory Manager Workflow</h3>
                <div class="role-content">
                    <div class="mermaid">
                        flowchart TD
                            Start([Inventory Manager Access]) --> Auth{Authenticated?}
                            Auth -->|No| Login[Login via Clerk]
                            Auth -->|Yes| InventoryHub[Inventory Management Hub]
                            Login --> InventoryHub

                            InventoryHub --> Products[Product Management]
                            InventoryHub --> Stock[Stock Management]
                            InventoryHub --> Designs[Design Approval]
                            InventoryHub --> Alerts[Stock Alerts]
                            InventoryHub --> Categories[Category Management]

                            Products --> ViewProducts[View All Products]
                            Products --> CreateProduct[Create New Product]
                            Products --> UpdateProduct[Update Existing Product]

                            ViewProducts --> ProductDetail[Product Details]
                            ProductDetail --> EditProduct[Edit Product Info]
                            ProductDetail --> ManageStock[Manage Stock Levels]

                            CreateProduct --> ProductForm[Product Creation Form]
                            ProductForm --> SetVariants[Set Size/Color Variants]
                            SetVariants --> StockLevels[Set Initial Stock]
                            StockLevels --> ProductCreated[Product Created]

                            Stock --> ViewStock[View Stock Levels]
                            Stock --> UpdateStock[Update Stock Quantities]
                            Stock --> RestockItems[Restock Items]

                            ViewStock --> StockDetail[Stock Details]
                            StockDetail --> AdjustQuantity[Adjust Quantity]
                            AdjustQuantity --> StockUpdated[Stock Updated]

                            RestockItems --> RestockForm[Restock Request Form]
                            RestockForm --> RestockSubmit[Submit Restock Request]
                            RestockSubmit --> RestockProcessed[Restock Processed]

                            Designs --> PendingDesigns[View Pending Designs]
                            Designs --> ReviewDesign[Review Design Details]

                            PendingDesigns --> DesignDetail[Design Details]
                            DesignDetail --> ApproveDesign[Approve Design]
                            DesignDetail --> RejectDesign[Reject Design]

                            ApproveDesign --> AutoCreateProduct[Auto-Create Product]
                            AutoCreateProduct --> SetupVariants[Setup Stock Variants]
                            SetupVariants --> DesignApproved[Design Approved & Live]

                            RejectDesign --> FeedbackForm[Provide Feedback]
                            FeedbackForm --> DesignRejected[Design Rejected]

                            Alerts --> LowStockAlerts[Low Stock Alerts]
                            Alerts --> OutOfStock[Out of Stock Items]
                            Alerts --> RestockRecommend[Restock Recommendations]

                            LowStockAlerts --> AlertDetail[Alert Details]
                            AlertDetail --> QuickRestock[Quick Restock Action]
                            QuickRestock --> AlertResolved[Alert Resolved]

                            Categories --> ViewCategories[View Categories]
                            Categories --> CreateCategory[Create New Category]
                            Categories --> UpdateCategory[Update Category]

                            style Start fill:#e1f5fe
                            style InventoryHub fill:#f3e5f5
                            style DesignApproved fill:#e8f5e8
                            style DesignRejected fill:#ffebee
                            style RestockProcessed fill:#e0f2f1
                            style AlertResolved fill:#fff3e0
                    </div>

                    <div class="features">
                        <h4>Inventory Manager Features</h4>
                        <ul>
                            <li>Complete product lifecycle management</li>
                            <li>Multi-variant stock control</li>
                            <li>Design approval workflow</li>
                            <li>Low stock alert system</li>
                            <li>Automated restock recommendations</li>
                            <li>Real-time stock level monitoring</li>
                            <li>Category management</li>
                            <li>Product creation from designs</li>
                            <li>Stock adjustment tools</li>
                            <li>Inventory analytics</li>
                            <li>Bulk stock operations</li>
                            <li>Designer feedback system</li>
                        </ul>
                    </div>

                    <div class="api-endpoints">
                        <h4>Key API Endpoints</h4>
                        <div class="endpoint">GET /api/inventory/products - Get all products</div>
                        <div class="endpoint">POST /api/inventory/products - Create new product</div>
                        <div class="endpoint">PUT /api/inventory/products/{id} - Update product</div>
                        <div class="endpoint">GET /api/inventory/stock/{id} - Get stock details</div>
                        <div class="endpoint">PUT /api/inventory/stock/{id} - Update stock levels</div>
                        <div class="endpoint">GET /api/inventory/designs/pending - Get pending designs</div>
                        <div class="endpoint">PUT /api/inventory/designs/{id}/review - Review design</div>
                        <div class="endpoint">GET /api/inventory/stock/low - Get low stock alerts</div>
                        <div class="endpoint">GET /api/inventory/categories - Get categories</div>
                    </div>
                </div>
            </section>
        </div>

        <div class="footer">
            <p><strong>Fashion Mart Backend System</strong> | Complete User Flow Documentation</p>
            <p>Node.js + Express + MySQL + Sequelize | Clerk Auth + Stripe Payments + Google Vision AI</p>
            <p>Generated on: <script>document.write(new Date().toLocaleDateString())</script></p>
        </div>
    </div>

    <script>
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default',
            themeVariables: {
                primaryColor: '#3498db',
                primaryTextColor: '#2c3e50',
                primaryBorderColor: '#2980b9',
                lineColor: '#34495e',
                secondaryColor: '#ecf0f1',
                tertiaryColor: '#f8f9fa'
            }
        });
    </script>
</body>
</html>